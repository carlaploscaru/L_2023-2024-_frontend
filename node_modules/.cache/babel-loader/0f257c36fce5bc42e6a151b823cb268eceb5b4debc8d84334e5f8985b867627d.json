{"ast":null,"code":"var _jsxFileName = \"D:\\\\proiecte\\\\frontend\\\\src\\\\pages\\\\PropertyDetail.js\",\n  _s = $RefreshSig$();\nimport { Await, defer, json, redirect, useRouteLoaderData } from \"react-router-dom\";\nimport PropertyItem from \"../components/PropertyItem\";\nimport { getAuthToken } from \"../utils/auth\";\nimport { Suspense, useEffect } from \"react\";\nimport PropertyList from \"../components/PropertyList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PropertyDetailPage = () => {\n  _s();\n  const {\n    property,\n    properties\n  } = useRouteLoaderData(\"property-detail\");\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Suspense, {\n      children: /*#__PURE__*/_jsxDEV(Await, {\n        resolve: properties,\n        children: loadedProperties => /*#__PURE__*/_jsxDEV(PropertyList, {\n          properties: loadedProperties\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(PropertyDetailPage, \"TexEh484+KEL63RhBMwVupD9wOo=\", false, function () {\n  return [useRouteLoaderData];\n});\n_c = PropertyDetailPage;\nexport default PropertyDetailPage;\nconst loadProperty = async id => {\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/place/\" + id, {\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch details for the selected property\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.place;\n  }\n};\nconst loadProperties = async () => {\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/place\", {\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch properties\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.places;\n  }\n};\nexport const loader = async ({\n  request,\n  params\n}) => {\n  const propertyId = params.propertyId;\n  const token = getAuthToken();\n  if (!token) {\n    return redirect(\"/auth?mode=login\");\n  }\n  return defer({\n    property: await loadProperty(propertyId),\n    properties: loadProperties()\n  });\n};\nexport const action = async ({\n  request,\n  params\n}) => {\n  const propertyId = params.propertyId;\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/place/\" + propertyId, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return redirect(\"/properties\");\n};\nvar _c;\n$RefreshReg$(_c, \"PropertyDetailPage\");","map":{"version":3,"names":["Await","defer","json","redirect","useRouteLoaderData","PropertyItem","getAuthToken","Suspense","useEffect","PropertyList","jsxDEV","_jsxDEV","Fragment","_Fragment","PropertyDetailPage","_s","property","properties","window","scrollTo","top","left","behavior","children","resolve","loadedProperties","fileName","_jsxFileName","lineNumber","columnNumber","_c","loadProperty","id","token","response","fetch","method","headers","Authorization","ok","message","status","resData","place","loadProperties","places","loader","request","params","propertyId","action","$RefreshReg$"],"sources":["D:/proiecte/frontend/src/pages/PropertyDetail.js"],"sourcesContent":["import {\r\n  Await,\r\n  defer,\r\n  json,\r\n  redirect,\r\n  useRouteLoaderData,\r\n} from \"react-router-dom\";\r\nimport PropertyItem from \"../components/PropertyItem\";\r\nimport { getAuthToken } from \"../utils/auth\";\r\nimport { Suspense, useEffect } from \"react\";\r\nimport PropertyList from \"../components/PropertyList\";\r\n\r\nconst PropertyDetailPage = () => {\r\n  const { property, properties } =\r\n    useRouteLoaderData(\"property-detail\");\r\n\r\n    useEffect(() => {\r\n      window.scrollTo({top: 0, left: 0, behavior: 'smooth'});}, []);\r\n      \r\n  return (\r\n    <>\r\n     \r\n      <Suspense>\r\n        <Await resolve={properties}>\r\n          {(loadedProperties) => <PropertyList properties={loadedProperties} />}\r\n        </Await>\r\n      </Suspense>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PropertyDetailPage;\r\n\r\nconst loadProperty = async (id) => {\r\n  const token = getAuthToken();\r\n\r\n  const response = await fetch(\"http://localhost:8000/place/\" + id, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw json(\r\n      {\r\n        message: \"Could not fetch details for the selected property\",\r\n      },\r\n      {\r\n        status: 500,\r\n      }\r\n    );\r\n  } else {\r\n    const resData = await response.json();\r\n    return resData.place;\r\n  }\r\n};\r\n\r\nconst loadProperties = async () => {\r\n  const token = getAuthToken();\r\n\r\n  const response = await fetch(\"http://localhost:8000/place\", {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw json({ message: \"Could not fetch properties\" }, { status: 500 });\r\n  } else {\r\n    const resData = await response.json();\r\n\r\n    return resData.places;\r\n  }\r\n};\r\n\r\n\r\nexport const loader = async ({ request, params }) => {\r\n  const propertyId = params.propertyId;\r\n\r\n  const token = getAuthToken();\r\n\r\n  if (!token) {\r\n    return redirect(\"/auth?mode=login\");\r\n  }\r\n\r\n  return defer({\r\n    property: await loadProperty(propertyId),\r\n    properties: loadProperties(),\r\n   \r\n  });\r\n};\r\n\r\nexport const action = async ({ request, params }) => {\r\n  const propertyId = params.propertyId;\r\n  const token = getAuthToken();\r\n\r\n  const response = await fetch(\"http://localhost:8000/place/\" + propertyId, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  return redirect(\"/properties\");\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}