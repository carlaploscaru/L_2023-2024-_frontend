{"ast":null,"code":"var _jsxFileName = \"D:\\\\proiecte\\\\frontend\\\\src\\\\pages\\\\PropertyDetail.js\",\n  _s = $RefreshSig$();\nimport { Await, defer, json, redirect, useRouteLoaderData } from \"react-router-dom\";\nimport PropertyItem from \"../components/PropertyItem\";\nimport { getAuthToken } from \"../utils/auth\";\nimport { Suspense, useEffect } from \"react\";\nimport PropertyList from \"../components/PropertyList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PropertyDetailPage = () => {\n  _s();\n  const {\n    property,\n    properties\n  } = useRouteLoaderData(\"property-detail\");\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }, []);\n  useEffect(() => {\n    // Scroll to the top of the page when property changes\n    window.scrollTo(0, 0);\n  }, [property]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 27\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Await, {\n        resolve: property,\n        children: loadedProperty => /*#__PURE__*/_jsxDEV(PropertyItem, {\n          property: loadedProperty\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n      children: /*#__PURE__*/_jsxDEV(Await, {\n        resolve: properties,\n        children: loadedProperties => /*#__PURE__*/_jsxDEV(PropertyList, {\n          properties: loadedProperties\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(PropertyDetailPage, \"SWS7bRcRvUqBiSokF4ZhaSd0GJg=\", false, function () {\n  return [useRouteLoaderData];\n});\n_c = PropertyDetailPage;\nexport default PropertyDetailPage;\nconst loadProperty = async id => {\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/place/\" + id, {\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch details for the selected property\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.place;\n  }\n};\nconst loadProperties = async () => {\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/place\", {\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch properties\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.places;\n  }\n};\nexport const loader = async ({\n  request,\n  params\n}) => {\n  const propertyId = params.propertyId;\n  const token = getAuthToken();\n  if (!token) {\n    return redirect(\"/auth?mode=login\");\n  }\n  return defer({\n    property: await loadProperty(propertyId),\n    properties: loadProperties()\n  });\n};\nexport const action = async ({\n  request,\n  params\n}) => {\n  const propertyId = params.propertyId;\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/place/\" + propertyId, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  return redirect(\"/properties\");\n};\nvar _c;\n$RefreshReg$(_c, \"PropertyDetailPage\");","map":{"version":3,"names":["Await","defer","json","redirect","useRouteLoaderData","PropertyItem","getAuthToken","Suspense","useEffect","PropertyList","jsxDEV","_jsxDEV","Fragment","_Fragment","PropertyDetailPage","_s","property","properties","window","scrollTo","top","left","behavior","children","fallback","style","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","resolve","loadedProperty","loadedProperties","_c","loadProperty","id","token","response","fetch","method","headers","Authorization","ok","message","status","resData","place","loadProperties","places","loader","request","params","propertyId","action","$RefreshReg$"],"sources":["D:/proiecte/frontend/src/pages/PropertyDetail.js"],"sourcesContent":["import {\r\n  Await,\r\n  defer,\r\n  json,\r\n  redirect,\r\n  useRouteLoaderData,\r\n} from \"react-router-dom\";\r\nimport PropertyItem from \"../components/PropertyItem\";\r\nimport { getAuthToken } from \"../utils/auth\";\r\nimport { Suspense, useEffect } from \"react\";\r\nimport PropertyList from \"../components/PropertyList\";\r\n\r\nconst PropertyDetailPage = () => {\r\n  const { property, properties } =\r\n    useRouteLoaderData(\"property-detail\");\r\n\r\n    useEffect(() => {\r\n      window.scrollTo({top: 0, left: 0, behavior: 'smooth'});}, []);\r\n      useEffect(() => {\r\n        // Scroll to the top of the page when property changes\r\n        window.scrollTo(0, 0);\r\n      }, [property]);\r\n      \r\n  return (\r\n    <>\r\n      <Suspense fallback={<p style={{ textAlign: \"center\" }}>Loading...</p>} >\r\n        <Await resolve={property} >\r\n          {(loadedProperty) => (\r\n            <PropertyItem \r\n              property={loadedProperty} \r\n            />\r\n          )}\r\n        </Await>\r\n      </Suspense>\r\n      <Suspense>\r\n        <Await resolve={properties}>\r\n          {(loadedProperties) => <PropertyList properties={loadedProperties} />}\r\n        </Await>\r\n      </Suspense>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PropertyDetailPage;\r\n\r\nconst loadProperty = async (id) => {\r\n  const token = getAuthToken();\r\n\r\n  const response = await fetch(\"http://localhost:8000/place/\" + id, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw json(\r\n      {\r\n        message: \"Could not fetch details for the selected property\",\r\n      },\r\n      {\r\n        status: 500,\r\n      }\r\n    );\r\n  } else {\r\n    const resData = await response.json();\r\n    return resData.place;\r\n  }\r\n};\r\n\r\nconst loadProperties = async () => {\r\n  const token = getAuthToken();\r\n\r\n  const response = await fetch(\"http://localhost:8000/place\", {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw json({ message: \"Could not fetch properties\" }, { status: 500 });\r\n  } else {\r\n    const resData = await response.json();\r\n\r\n    return resData.places;\r\n  }\r\n};\r\n\r\n\r\nexport const loader = async ({ request, params }) => {\r\n  const propertyId = params.propertyId;\r\n\r\n  const token = getAuthToken();\r\n\r\n  if (!token) {\r\n    return redirect(\"/auth?mode=login\");\r\n  }\r\n\r\n  return defer({\r\n    property: await loadProperty(propertyId),\r\n    properties: loadProperties(),\r\n   \r\n  });\r\n};\r\n\r\nexport const action = async ({ request, params }) => {\r\n  const propertyId = params.propertyId;\r\n  const token = getAuthToken();\r\n\r\n  const response = await fetch(\"http://localhost:8000/place/\" + propertyId, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  return redirect(\"/properties\");\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}