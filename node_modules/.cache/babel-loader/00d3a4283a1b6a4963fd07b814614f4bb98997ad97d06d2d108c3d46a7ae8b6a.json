{"ast":null,"code":"var _jsxFileName = \"D:\\\\proiecte\\\\frontend\\\\src\\\\pages\\\\Management.js\",\n  _s = $RefreshSig$();\nimport { Await, defer, json, redirect, useActionData, useRouteLoaderData } from \"react-router-dom\";\nimport { getAuthToken } from \"../utils/auth\";\nimport { Suspense } from \"react\";\nimport ProfileForm from \"../components/ProfileForm\";\nimport BookList from \"../components/BookList\";\nimport ClientList from \"../components/ClientList\";\nimport CategoryList from \"../components/CategoryList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ManagementPage = () => {\n  _s();\n  const {\n    categories\n  } = useRouteLoaderData(\"management\");\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 37\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Await, {\n          resolve: categories,\n          children: loadedCat => /*#__PURE__*/_jsxDEV(CategoryList, {\n            categories: loadedCat\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(ManagementPage, \"vZDfm0RSgfykU90ulj1YfNuJkKA=\", false, function () {\n  return [useRouteLoaderData];\n});\n_c = ManagementPage;\nexport default ManagementPage;\nexport const action = async ({\n  request,\n  params\n}) => {\n  const token = getAuthToken();\n  const response = await fetch(`http://localhost:8000/category/${id}`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + token,\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  return true;\n};\nconst loadCategories = async () => {\n  const token = getAuthToken();\n  const response = await fetch(\"http://localhost:8000/category\", {\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  });\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch my profile data!\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.categories;\n  }\n};\nexport const loader = async ({\n  request,\n  params\n}) => {\n  const token = getAuthToken();\n  if (!token) {\n    return redirect(\"/auth?mode=login\");\n  }\n  return defer({\n    categories: loadCategories()\n  });\n};\nvar _c;\n$RefreshReg$(_c, \"ManagementPage\");","map":{"version":3,"names":["Await","defer","json","redirect","useActionData","useRouteLoaderData","getAuthToken","Suspense","ProfileForm","BookList","ClientList","CategoryList","jsxDEV","_jsxDEV","Fragment","_Fragment","ManagementPage","_s","categories","children","style","display","fallback","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","resolve","loadedCat","_c","action","request","params","token","response","fetch","id","method","headers","Authorization","loadCategories","ok","message","status","resData","loader","$RefreshReg$"],"sources":["D:/proiecte/frontend/src/pages/Management.js"],"sourcesContent":["import {\r\n    Await,\r\n    defer,\r\n    json,\r\n    redirect,\r\n    useActionData,\r\n    useRouteLoaderData,\r\n} from \"react-router-dom\";\r\nimport { getAuthToken } from \"../utils/auth\";\r\nimport { Suspense } from \"react\";\r\nimport ProfileForm from \"../components/ProfileForm\";\r\nimport BookList from \"../components/BookList\";\r\nimport ClientList from \"../components/ClientList\";\r\nimport CategoryList from \"../components/CategoryList\";\r\n\r\nconst ManagementPage = () => {\r\n    const { categories } = useRouteLoaderData(\"management\");\r\n\r\n    return (\r\n        <>\r\n            <div style={{ display: \"flex\" }}>\r\n                <Suspense fallback={<p style={{ textAlign: \"center\" }}>Loading...</p>}>\r\n                    <Await resolve={categories}>\r\n                        {(loadedCat) => <CategoryList categories={loadedCat} />}\r\n                    </Await>\r\n                </Suspense>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ManagementPage;\r\n\r\nexport const action = async ({ request, params }) => {\r\n    const token = getAuthToken();\r\n\r\n    const response = await fetch(`http://localhost:8000/category/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n          Authorization: \"Bearer \" + token,\r\n          \"Content-Type\": \"application/json\",\r\n      },\r\n  })\r\n    return true;\r\n};\r\n\r\n\r\nconst loadCategories = async () => {\r\n    const token = getAuthToken();\r\n\r\n    const response = await fetch(\"http://localhost:8000/category\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      });\r\n    \r\n      if (!response.ok) {\r\n        throw json(\r\n          {\r\n            message: \"Could not fetch my profile data!\",\r\n          },\r\n          {\r\n            status: 500,\r\n          }\r\n        );\r\n      } else {\r\n        const resData = await response.json();\r\n    \r\n        return resData.categories;\r\n      }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const loader = async ({ request, params }) => {\r\n    const token = getAuthToken();\r\n\r\n    if (!token) {\r\n        return redirect(\"/auth?mode=login\");\r\n    }\r\n\r\n    return defer({\r\n      \r\n        categories: loadCategories(),\r\n     \r\n    });\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}