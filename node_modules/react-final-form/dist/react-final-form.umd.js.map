{"version":3,"file":"react-final-form.umd.js","sources":["../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../src/renderComponent.js","../src/flattenSubscription.js","../src/isReactNative.js","../src/getValue.js","../src/context.js","../src/useForm.js","../src/useField.js","../src/Field.js","../src/useWhenValueChanges.js","../src/useConstant.js","../src/shallowEqual.js","../src/isSyntheticEvent.js","../src/ReactFinalForm.js","../src/useFormState.js","../src/FormSpy.js"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","// @flow\nimport * as React from 'react'\nimport type { RenderableProps } from './types'\n\n// shared logic between components that use either render prop,\n// children render function, or component prop\nexport default function renderComponent<T>(\n  props: RenderableProps<T> & T,\n  name: string\n): React.Node {\n  const { render, children, component, ...rest } = props\n  if (component) {\n    return React.createElement(component, { ...rest, children, render })\n  }\n  if (render) {\n    return render(children === undefined ? rest : { ...rest, children }) // inject children back in\n  }\n  if (typeof children !== 'function') {\n    // istanbul ignore next\n    if (process.env.NODE_ENV !== 'production') {\n      console.error(\n        `Warning: Must specify either a render prop, a render function as children, or a component prop to ${name}`\n      )\n    }\n    return null // warning will alert developer to their mistake\n  }\n  return children(rest)\n}\n","// @flow\ntype Subscription = { [string]: boolean }\nexport default function flattenSubscription(\n  subscription: Subscription = {}\n): string[] {\n  return Object.keys(subscription).filter(key => subscription[key] === true)\n}\n","// @flow\nconst isReactNative =\n  typeof window !== 'undefined' &&\n  window.navigator &&\n  window.navigator.product &&\n  window.navigator.product === 'ReactNative'\n\nexport default isReactNative\n","// @flow\nconst getSelectedValues = options => {\n  const result = []\n  if (options) {\n    for (let index = 0; index < options.length; index++) {\n      const option = options[index]\n      if (option.selected) {\n        result.push(option.value)\n      }\n    }\n  }\n  return result\n}\n\nconst getValue = (\n  event: SyntheticInputEvent<*>,\n  currentValue: any,\n  valueProp: any,\n  isReactNative: boolean\n) => {\n  if (\n    !isReactNative &&\n    event.nativeEvent &&\n    (event.nativeEvent: Object).text !== undefined\n  ) {\n    return (event.nativeEvent: Object).text\n  }\n  if (isReactNative && event.nativeEvent) {\n    return (event.nativeEvent: any).text\n  }\n  const detypedEvent: any = event\n  const { target: { type, value, checked } } = detypedEvent\n  switch (type) {\n    case 'checkbox':\n      if (valueProp !== undefined) {\n        // we are maintaining an array, not just a boolean\n        if (checked) {\n          // add value to current array value\n          return Array.isArray(currentValue)\n            ? currentValue.concat(valueProp)\n            : [valueProp]\n        } else {\n          // remove value from current array value\n          if (!Array.isArray(currentValue)) {\n            return currentValue\n          }\n          const index = currentValue.indexOf(valueProp)\n          if (index < 0) {\n            return currentValue\n          } else {\n            return currentValue\n              .slice(0, index)\n              .concat(currentValue.slice(index + 1))\n          }\n        }\n      } else {\n        // it's just a boolean\n        return !!checked\n      }\n    case 'select-multiple':\n      return getSelectedValues((event.target: any).options)\n    default:\n      return value\n  }\n}\n\nexport default getValue\n","// @flow\nimport * as React from 'react'\nimport type { FormApi } from 'final-form'\n\nexport default React.createContext<?FormApi>()\n","// @flow\nimport * as React from 'react'\nimport type { FormApi } from 'final-form'\nimport ReactFinalFormContext from './context'\n\nconst useForm = (componentName?: string): FormApi => {\n  const form: ?FormApi = React.useContext(ReactFinalFormContext)\n  if (!form) {\n    throw new Error(\n      `Warning: ${componentName ||\n        'useForm'} must be used inside of a <Form> component`\n    )\n  }\n  return form\n}\n\nexport default useForm\n","// @flow\nimport * as React from 'react'\nimport { fieldSubscriptionItems } from 'final-form'\nimport flattenSubscription from './flattenSubscription'\nimport type { FieldSubscription, FieldState, FormApi } from 'final-form'\nimport type { UseFieldConfig, FieldInputProps, FieldRenderProps } from './types'\nimport isReactNative from './isReactNative'\nimport getValue from './getValue'\nimport useForm from './useForm'\n\nconst all: FieldSubscription = fieldSubscriptionItems.reduce((result, key) => {\n  result[key] = true\n  return result\n}, {})\n\nconst defaultFormat = (value: ?any, name: string) =>\n  value === undefined ? '' : value\nconst defaultParse = (value: ?any, name: string) =>\n  value === '' ? undefined : value\n\nconst useField = (\n  name: string,\n  {\n    allowNull,\n    component,\n    defaultValue,\n    format = defaultFormat,\n    formatOnBlur,\n    initialValue,\n    isEqual,\n    multiple,\n    parse = defaultParse,\n    subscription,\n    type,\n    validate,\n    validateFields,\n    value: _value\n  }: UseFieldConfig = {}\n): FieldRenderProps => {\n  const form: FormApi = useForm('useField')\n\n  // keep ref to most recent copy of validate function\n  const validateRef = React.useRef(validate)\n  React.useEffect(() => {\n    validateRef.current = validate\n  })\n\n  const register = (callback: FieldState => void) =>\n    form.registerField(name, callback, subscription || all, {\n      defaultValue,\n      getValidator: () => validateRef.current,\n      initialValue,\n      isEqual,\n      validateFields\n    })\n\n  const firstRender = React.useRef(true)\n\n  // synchronously register and unregister to query field state for our subscription on first render\n  const [state, setState] = React.useState<FieldState>(\n    (): FieldState => {\n      let initialState: FieldState = {}\n      register(state => {\n        initialState = state\n      })()\n      return initialState\n    }\n  )\n\n  const flattenedSubscription = flattenSubscription(subscription || all)\n  // useDependenciesDebugger({\n  //   name,\n  //   defaultValue,\n  //   validate,\n  //   initialValue,\n  //   isEqual,\n  //   validateFields,\n  //   form\n  // })\n  React.useEffect(\n    () =>\n      register(state => {\n        if (firstRender.current) {\n          firstRender.current = false\n        } else {\n          setState(state)\n        }\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      name,\n      defaultValue,\n      // If we want to allow inline fat-arrow field-level validation functions, we\n      // cannot reregister field every time validate function !==.\n      // validate,\n      initialValue,\n      isEqual,\n      validateFields,\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      ...flattenedSubscription\n    ]\n  )\n\n  const handlers = {\n    onBlur: React.useCallback(\n      (event: ?SyntheticFocusEvent<*>) => {\n        // this is to appease the Flow gods\n        // istanbul ignore next\n        if (state) {\n          state.blur()\n          if (format && formatOnBlur) {\n            state.change(format(state.value, state.name))\n          }\n        }\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [state.name, state.value, format, formatOnBlur]\n    ),\n    onChange: React.useCallback(\n      (event: SyntheticInputEvent<*> | any) => {\n        // istanbul ignore next\n        if (process.env.NODE_ENV !== 'production' && event && event.target) {\n          const targetType = event.target.type\n          const unknown =\n            ~['checkbox', 'radio', 'select-multiple'].indexOf(targetType) &&\n            !type\n\n          const value: any =\n            targetType === 'select-multiple' ? state.value : _value\n\n          if (unknown) {\n            console.error(\n              `Warning: You must pass \\`type=\"${\n                targetType === 'select-multiple' ? 'select' : targetType\n              }\"\\` prop to your Field(${name}) component.\\n` +\n                `Without it we don't know how to unpack your \\`value\\` prop - ${\n                  Array.isArray(value) ? `[${value}]` : `\"${value}\"`\n                }.`\n            )\n          }\n        }\n\n        const value: any =\n          event && event.target\n            ? getValue(event, state.value, _value, isReactNative)\n            : event\n        state.change(parse ? parse(value, name) : value)\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [_value, name, parse, state.value, type]\n    ),\n    onFocus: React.useCallback((event: ?SyntheticFocusEvent<*>) => {\n      state.focus()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n  }\n\n  let { blur, change, focus, value, name: ignoreName, ...otherState } = state\n  const meta = {\n    // this is to appease the Flow gods\n    active: otherState.active,\n    data: otherState.data,\n    dirty: otherState.dirty,\n    dirtySinceLastSubmit: otherState.dirtySinceLastSubmit,\n    error: otherState.error,\n    initial: otherState.initial,\n    invalid: otherState.invalid,\n    modified: otherState.modified,\n    pristine: otherState.pristine,\n    submitError: otherState.submitError,\n    submitFailed: otherState.submitFailed,\n    submitSucceeded: otherState.submitSucceeded,\n    submitting: otherState.submitting,\n    touched: otherState.touched,\n    valid: otherState.valid,\n    visited: otherState.visited\n  }\n  if (formatOnBlur) {\n    value = defaultFormat(value, name)\n  } else if (format) {\n    value = format(value, name)\n  }\n  if (value === null && !allowNull) {\n    value = ''\n  }\n  const input: FieldInputProps = { name, value, ...handlers }\n  if (type === 'checkbox') {\n    input.type = type // make sure it gets passed along to input\n    if (_value === undefined) {\n      input.checked = !!value\n    } else {\n      input.checked = !!(Array.isArray(value) && ~value.indexOf(_value))\n      input.value = _value\n    }\n  } else if (type === 'radio') {\n    input.type = type // make sure it gets passed along to input\n    input.checked = value === _value\n    input.value = _value\n  } else if (component === 'select' && multiple) {\n    input.value = input.value || []\n    input.multiple = true\n  }\n\n  const renderProps: FieldRenderProps = { input, meta } // assign to force Flow check\n  return renderProps\n}\n\nexport default useField\n","// @flow\nimport * as React from 'react'\nimport type { FieldProps as Props, FieldRenderProps } from './types'\nimport renderComponent from './renderComponent'\nimport useField from './useField'\n\nconst Field = ({\n  allowNull,\n  children,\n  component,\n  defaultValue,\n  format,\n  formatOnBlur,\n  initialValue,\n  isEqual,\n  multiple,\n  name,\n  parse,\n  subscription,\n  type,\n  validate,\n  validateFields,\n  value,\n  ...rest\n}: Props) => {\n  const field: FieldRenderProps = useField(name, {\n    allowNull,\n    children,\n    component,\n    defaultValue,\n    format,\n    formatOnBlur,\n    initialValue,\n    isEqual,\n    multiple,\n    parse,\n    subscription,\n    type,\n    validate,\n    validateFields,\n    value\n  })\n\n  if (typeof children === 'function') {\n    return (children: Function)({ ...field, ...rest })\n  }\n\n  if (typeof component === 'string') {\n    // ignore meta, combine input with any other props\n    return React.createElement(component, { ...field.input, children, ...rest })\n  }\n  return renderComponent(\n    { ...field, children, component, ...rest },\n    `Field(${name})`\n  )\n}\n\nexport default Field\n","// @flow\nimport React from 'react'\n\nexport default function useWhenValueChanges(\n  value: any,\n  callback: () => void,\n  isEqual: (any, any) => boolean = (a, b) => a === b\n) {\n  const previous = React.useRef(value)\n  React.useEffect(() => {\n    if (!isEqual(value, previous.current)) {\n      callback()\n      previous.current = value\n    }\n  })\n}\n","// @flow\nimport React from 'react'\n\n/**\n * A simple hook to create a constant value that lives for\n * the lifetime of the component.\n *\n * Plagiarized from https://github.com/Andarist/use-constant\n *\n * Do NOT reuse this code unless you know what you're doing.\n * Use Andarist's hook; it's more fault tolerant to things like\n * falsy values.\n *\n * @param {Function} init - A function to generate the value\n */\nexport default function useConstant<T>(init: () => T): T {\n  const ref = React.useRef<?T>()\n  if (!ref.current) {\n    ref.current = init()\n  }\n  return ref.current\n}\n","// @flow\nconst shallowEqual = (a: any, b: any): boolean => {\n  if (a === b) {\n    return true\n  }\n  if (typeof a !== 'object' || !a || typeof b !== 'object' || !b) {\n    return false\n  }\n  var keysA = Object.keys(a)\n  var keysB = Object.keys(b)\n  if (keysA.length !== keysB.length) {\n    return false\n  }\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(b)\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx]\n    if (!bHasOwnProperty(key) || a[key] !== b[key]) {\n      return false\n    }\n  }\n  return true\n}\n\nexport default shallowEqual\n","// @flow\nconst isSyntheticEvent = (candidate: any): boolean =>\n  !!(candidate && typeof candidate.stopPropagation === 'function')\n\nexport default isSyntheticEvent\n","// @flow\nimport * as React from 'react'\nimport {\n  createForm,\n  formSubscriptionItems,\n  version as ffVersion\n} from 'final-form'\nimport type {\n  FormApi,\n  Config,\n  FormSubscription,\n  FormState,\n  Unsubscribe\n} from 'final-form'\nimport type { FormProps as Props } from './types'\nimport renderComponent from './renderComponent'\nimport useWhenValueChanges from './useWhenValueChanges'\nimport useConstant from './useConstant'\nimport shallowEqual from './shallowEqual'\nimport isSyntheticEvent from './isSyntheticEvent'\nimport type { FormRenderProps } from './types.js.flow'\nimport flattenSubscription from './flattenSubscription'\nimport ReactFinalFormContext from './context'\n\nexport const version = '4.1.0'\n\nconst versions = {\n  'final-form': ffVersion,\n  'react-final-form': version\n}\n\nexport const all: FormSubscription = formSubscriptionItems.reduce(\n  (result, key) => {\n    result[key] = true\n    return result\n  },\n  {}\n)\n\nconst ReactFinalForm = ({\n  debug,\n  decorators,\n  destroyOnUnregister,\n  initialValues,\n  initialValuesEqual,\n  keepDirtyOnReinitialize,\n  mutators,\n  onSubmit,\n  subscription,\n  validate,\n  validateOnBlur,\n  ...rest\n}: Props) => {\n  const config: Config = {\n    debug,\n    destroyOnUnregister,\n    initialValues,\n    keepDirtyOnReinitialize,\n    mutators,\n    onSubmit,\n    validate,\n    validateOnBlur\n  }\n\n  const form: FormApi = useConstant(() => {\n    const f = createForm(config)\n    f.pauseValidation()\n    return f\n  })\n\n  // synchronously register and unregister to query form state for our subscription on first render\n  const [state, setState] = React.useState<FormState>(\n    (): FormState => {\n      let initialState: FormState = {}\n      form.subscribe(state => {\n        initialState = state\n      }, subscription || all)()\n      return initialState\n    }\n  )\n\n  const flattenedSubscription = flattenSubscription(subscription || all)\n  React.useEffect(() => {\n    // We have rendered, so all fields are no registered, so we can unpause validation\n    form.isValidationPaused() && form.resumeValidation()\n    const unsubscriptions: Unsubscribe[] = [\n      form.subscribe(s => {\n        if (!shallowEqual(s, state)) {\n          setState(s)\n        }\n      }, subscription || all),\n      ...(decorators\n        ? decorators.map(decorator =>\n            // this noop ternary is to appease the flow gods\n            // istanbul ignore next\n            decorator(form)\n          )\n        : [])\n    ]\n\n    return () => {\n      unsubscriptions.forEach(unsubscribe => unsubscribe())\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [decorators, ...flattenedSubscription])\n\n  // warn about decorator changes\n  // istanbul ignore next\n  if (process.env.NODE_ENV !== 'production') {\n    // You're never supposed to use hooks inside a conditional, but in this\n    // case we can be certain that you're not going to be changing your\n    // NODE_ENV between renders, so this is safe.\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useWhenValueChanges(\n      decorators,\n      () => {\n        console.error(\n          'Warning: Form decorators should not change from one render to the next as new values will be ignored'\n        )\n      },\n      shallowEqual\n    )\n  }\n\n  // allow updatable config\n  useWhenValueChanges(debug, () => {\n    form.setConfig('debug', debug)\n  })\n  useWhenValueChanges(destroyOnUnregister, () => {\n    form.setConfig('destroyOnUnregister', destroyOnUnregister)\n  })\n  useWhenValueChanges(\n    initialValues,\n    () => {\n      form.setConfig('initialValues', initialValues)\n    },\n    initialValuesEqual || shallowEqual\n  )\n  useWhenValueChanges(keepDirtyOnReinitialize, () => {\n    form.setConfig('keepDirtyOnReinitialize', keepDirtyOnReinitialize)\n  })\n  useWhenValueChanges(mutators, () => {\n    form.setConfig('mutators', mutators)\n  })\n  useWhenValueChanges(onSubmit, () => {\n    form.setConfig('onSubmit', onSubmit)\n  })\n  useWhenValueChanges(validate, () => {\n    form.setConfig('validate', validate)\n  })\n  useWhenValueChanges(validateOnBlur, () => {\n    form.setConfig('validateOnBlur', validateOnBlur)\n  })\n\n  const handleSubmit = (event: ?SyntheticEvent<HTMLFormElement>) => {\n    if (event) {\n      // sometimes not true, e.g. React Native\n      if (typeof event.preventDefault === 'function') {\n        event.preventDefault()\n      }\n      if (typeof event.stopPropagation === 'function') {\n        // prevent any outer forms from receiving the event too\n        event.stopPropagation()\n      }\n    }\n    return form.submit()\n  }\n\n  const renderProps: FormRenderProps = {\n    // assign to force Flow check\n    ...state,\n    form: {\n      ...form,\n      reset: eventOrValues => {\n        if (isSyntheticEvent(eventOrValues)) {\n          // it's a React SyntheticEvent, call reset with no arguments\n          form.reset()\n        } else {\n          form.reset(eventOrValues)\n        }\n      }\n    },\n    handleSubmit\n  }\n  return React.createElement(\n    ReactFinalFormContext.Provider,\n    { value: form },\n    renderComponent(\n      {\n        ...rest,\n        ...renderProps,\n        __versions: versions\n      },\n      'ReactFinalForm'\n    )\n  )\n}\n\nexport default ReactFinalForm\n","// @flow\nimport * as React from 'react'\nimport flattenSubscription from './flattenSubscription'\nimport type { UseFormStateParams } from './types'\nimport type { FormState, FormApi } from 'final-form'\nimport { all } from './ReactFinalForm'\nimport useForm from './useForm'\n\nconst useFormState = ({\n  onChange,\n  subscription\n}: UseFormStateParams = {}): FormState => {\n  const form: FormApi = useForm('useFormState')\n  const firstRender = React.useRef(true)\n\n  // synchronously register and unregister to query field state for our subscription on first render\n  const [state, setState] = React.useState<FormState>(\n    (): FormState => {\n      let initialState: FormState = {}\n      form.subscribe(state => {\n        initialState = state\n      }, subscription || all)()\n      if (onChange) {\n        onChange(initialState)\n      }\n      return initialState\n    }\n  )\n\n  const flattenedSubscription = flattenSubscription(subscription || all)\n  React.useEffect(\n    () =>\n      form.subscribe(newState => {\n        if (firstRender.current) {\n          firstRender.current = false\n        } else {\n          setState(newState)\n          if (onChange) {\n            onChange(newState)\n          }\n        }\n      }, subscription || all),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    flattenedSubscription\n  )\n  return state\n}\n\nexport default useFormState\n","// @flow\nimport * as React from 'react'\nimport renderComponent from './renderComponent'\nimport type { FormSpyPropsWithForm as Props, FormSpyRenderProps } from './types'\nimport type { FormApi } from 'final-form'\nimport isSyntheticEvent from './isSyntheticEvent'\nimport useFormState from './useFormState'\nimport ReactFinalFormContext from './context'\n\nconst FormSpy = ({ onChange, subscription, ...rest }: Props) => {\n  const reactFinalForm: ?FormApi = React.useContext(ReactFinalFormContext)\n  if (!reactFinalForm) {\n    throw new Error(\n      'Warning: FormSpy must be used inside of a ReactFinalForm component'\n    )\n  }\n  const state = useFormState({ onChange, subscription })\n  if (onChange) {\n    return null\n  }\n\n  const renderProps: FormSpyRenderProps = {\n    form: {\n      ...reactFinalForm,\n      reset: eventOrValues => {\n        if (isSyntheticEvent(eventOrValues)) {\n          // it's a React SyntheticEvent, call reset with no arguments\n          reactFinalForm.reset()\n        } else {\n          reactFinalForm.reset(eventOrValues)\n        }\n      }\n    }\n  }\n  return renderComponent(\n    {\n      ...rest,\n      ...state,\n      ...renderProps\n    },\n    'FormSpy'\n  )\n}\n\nexport default FormSpy\n"],"names":["renderComponent","props","name","render","children","component","rest","React","undefined","console","error","flattenSubscription","subscription","Object","keys","filter","key","isReactNative","window","navigator","product","getSelectedValues","options","result","index","length","option","selected","push","value","getValue","event","currentValue","valueProp","nativeEvent","text","detypedEvent","target","type","checked","Array","isArray","concat","indexOf","slice","useForm","componentName","form","ReactFinalFormContext","Error","all","fieldSubscriptionItems","reduce","defaultFormat","defaultParse","useField","allowNull","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","parse","validate","validateFields","_value","validateRef","current","register","callback","registerField","getValidator","firstRender","initialState","state","setState","flattenedSubscription","handlers","onBlur","blur","change","onChange","process","targetType","unknown","onFocus","focus","ignoreName","otherState","meta","active","data","dirty","dirtySinceLastSubmit","initial","invalid","modified","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","visited","input","renderProps","Field","field","useWhenValueChanges","a","b","previous","useRef","useEffect","useConstant","init","ref","shallowEqual","keysA","keysB","bHasOwnProperty","prototype","hasOwnProperty","bind","idx","isSyntheticEvent","candidate","stopPropagation","version","versions","ffVersion","formSubscriptionItems","ReactFinalForm","debug","decorators","destroyOnUnregister","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","validateOnBlur","config","f","createForm","pauseValidation","subscribe","isValidationPaused","resumeValidation","unsubscriptions","s","map","decorator","forEach","unsubscribe","setConfig","handleSubmit","preventDefault","submit","reset","eventOrValues","Provider","__versions","useFormState","newState","FormSpy","reactFinalForm"],"mappings":"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"}