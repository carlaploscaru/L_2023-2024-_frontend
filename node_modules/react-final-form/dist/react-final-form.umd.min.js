!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e=e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,B,O){"use strict";var F="default"in B?B.default:B;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,i,r={},u=Object.keys(e);for(i=0;i<u.length;i++)n=u[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}function E(e,t){var n=e.render,i=e.children,r=e.component,u=A(e,["render","children","component"]);return r?B.createElement(r,P({},u,{children:i,render:n})):n?n(void 0===i?u:P({},u,{children:i})):"function"!=typeof i?null:i(u)}function D(t){return void 0===t&&(t={}),Object.keys(t).filter(function(e){return!0===t[e]})}function N(e){var t=B.useContext(C);if(!t)throw new Error("Warning: "+(e||"useForm")+" must be used inside of a <Form> component");return t}function z(e,t){return void 0===e?"":e}function U(e,t){return""===e?void 0:e}function h(n,e){var t=void 0===e?{}:e,i=t.allowNull,r=t.component,u=t.defaultValue,a=t.format,o=void 0===a?z:a,c=t.formatOnBlur,l=t.initialValue,s=t.isEqual,f=t.multiple,d=t.parse,v=void 0===d?U:d,p=t.subscription,m=t.type,b=t.validate,y=t.validateFields,g=t.value,h=N("useField"),O=B.useRef(b);function F(e){return h.registerField(n,e,p||I,{defaultValue:u,getValidator:function(){return O.current},initialValue:l,isEqual:s,validateFields:y})}B.useEffect(function(){O.current=b});var E=B.useRef(!0),C=B.useState(function(){var t={};return F(function(e){t=e})(),t}),S=C[0],V=C[1],w=D(p||I);B.useEffect(function(){return F(function(e){E.current?E.current=!1:V(e)})},[n,u,l,s,y].concat(w));var k={onBlur:B.useCallback(function(e){S&&(S.blur(),o&&c&&S.change(o(S.value,S.name)))},[S.name,S.value,o,c]),onChange:B.useCallback(function(e){var t=e&&e.target?function(e,t,n,i){if(!i&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(i&&e.nativeEvent)return e.nativeEvent.text;var r=e.target,u=r.type,a=r.value,o=r.checked;switch(u){case"checkbox":if(void 0===n)return!!o;if(o)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var c=t.indexOf(n);return c<0?t:t.slice(0,c).concat(t.slice(c+1));case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var i=e[n];i.selected&&t.push(i.value)}return t}(e.target.options);default:return a}}(e,S.value,g,_):e;S.change(v?v(t,n):t)},[g,n,v,S.value,m]),onFocus:B.useCallback(function(e){S.focus()},[])},x=(S.blur,S.change,S.focus,S.value),R=(S.name,A(S,["blur","change","focus","value","name"])),j={active:R.active,data:R.data,dirty:R.dirty,dirtySinceLastSubmit:R.dirtySinceLastSubmit,error:R.error,initial:R.initial,invalid:R.invalid,modified:R.modified,pristine:R.pristine,submitError:R.submitError,submitFailed:R.submitFailed,submitSucceeded:R.submitSucceeded,submitting:R.submitting,touched:R.touched,valid:R.valid,visited:R.visited};c?x=z(x):o&&(x=o(x,n)),null!==x||i||(x="");var q=P({name:n,value:x},k);return"checkbox"===m?(q.type=m,void 0===g?q.checked=!!x:(q.checked=!(!Array.isArray(x)||!~x.indexOf(g)),q.value=g)):"radio"===m?(q.type=m,q.checked=x===g,q.value=g):"select"===r&&f&&(q.value=q.value||[],q.multiple=!0),{input:q,meta:j}}var _="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,C=B.createContext(),I=O.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function S(e,t,n){void 0===n&&(n=function(e,t){return e===t});var i=F.useRef(e);F.useEffect(function(){n(e,i.current)||(t(),i.current=e)})}function V(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=Object.prototype.hasOwnProperty.bind(t),u=0;u<n.length;u++){var a=n[u];if(!r(a)||e[a]!==t[a])return!1}return!0}function w(e){return!(!e||"function"!=typeof e.stopPropagation)}function a(e){var t=void 0===e?{}:e,n=t.onChange,i=t.subscription,r=N("useFormState"),u=B.useRef(!0),a=B.useState(function(){var t={};return r.subscribe(function(e){t=e},i||x)(),n&&n(t),t}),o=a[0],c=a[1],l=D(i||x);return B.useEffect(function(){return r.subscribe(function(e){u.current?u.current=!1:(c(e),n&&n(e))},i||x)},l),o}var t="4.1.0",k={"final-form":O.version,"react-final-form":t},x=O.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});e.Field=function(e){var t=e.allowNull,n=e.children,i=e.component,r=e.defaultValue,u=e.format,a=e.formatOnBlur,o=e.initialValue,c=e.isEqual,l=e.multiple,s=e.name,f=e.parse,d=e.subscription,v=e.type,p=e.validate,m=e.validateFields,b=e.value,y=A(e,["allowNull","children","component","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),g=h(s,{allowNull:t,children:n,component:i,defaultValue:r,format:u,formatOnBlur:a,initialValue:o,isEqual:c,multiple:l,parse:f,subscription:d,type:v,validate:p,validateFields:m,value:b});return"function"==typeof n?n(P({},g,y)):"string"==typeof i?B.createElement(i,P({},g.input,{children:n},y)):E(P({},g,{children:n,component:i},y))},e.Form=function(e){var t=e.debug,n=e.decorators,i=e.destroyOnUnregister,r=e.initialValues,u=e.initialValuesEqual,a=e.keepDirtyOnReinitialize,o=e.mutators,c=e.onSubmit,l=e.subscription,s=e.validate,f=e.validateOnBlur,d=A(e,["debug","decorators","destroyOnUnregister","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),v={debug:t,destroyOnUnregister:i,initialValues:r,keepDirtyOnReinitialize:a,mutators:o,onSubmit:c,validate:s,validateOnBlur:f},p=function(e){var t=F.useRef();return t.current||(t.current=e()),t.current}(function(){var e=O.createForm(v);return e.pauseValidation(),e}),m=B.useState(function(){var t={};return p.subscribe(function(e){t=e},l||x)(),t}),b=m[0],y=m[1],g=D(l||x);B.useEffect(function(){p.isValidationPaused()&&p.resumeValidation();var e=[p.subscribe(function(e){V(e,b)||y(e)},l||x)].concat(n?n.map(function(e){return e(p)}):[]);return function(){e.forEach(function(e){return e()})}},[n].concat(g)),S(t,function(){p.setConfig("debug",t)}),S(i,function(){p.setConfig("destroyOnUnregister",i)}),S(r,function(){p.setConfig("initialValues",r)},u||V),S(a,function(){p.setConfig("keepDirtyOnReinitialize",a)}),S(o,function(){p.setConfig("mutators",o)}),S(c,function(){p.setConfig("onSubmit",c)}),S(s,function(){p.setConfig("validate",s)}),S(f,function(){p.setConfig("validateOnBlur",f)});var h=P({},b,{form:P({},p,{reset:function(e){w(e)?p.reset():p.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),p.submit()}});return B.createElement(C.Provider,{value:p},E(P({},d,h,{__versions:k})))},e.FormSpy=function(e){var t=e.onChange,n=e.subscription,i=A(e,["onChange","subscription"]),r=B.useContext(C);if(!r)throw new Error("Warning: FormSpy must be used inside of a ReactFinalForm component");var u=a({onChange:t,subscription:n});return t?null:E(P({},i,u,{form:P({},r,{reset:function(e){w(e)?r.reset():r.reset(e)}})}))},e.ReactFinalFormContext=C,e.context=C,e.useField=h,e.useForm=N,e.useFormState=a,e.version=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
